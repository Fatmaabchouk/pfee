<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Facture</title>
    <style>
     /* CSS styles for invoice */
body {
    font-family: Arial, sans-serif;
    margin: 20px;
    padding: 0;
    background-color: #f7f7f7;
}

h1 {
    text-align: center;
    margin-bottom: 20px;
}

#commande-details {
    background-color: #fff;
    border: 1px solid #ddd;
    padding: 20px;
    border-radius: 5px;
}

p {
    margin: 5px 0;
}

/* Styling for headings */
h2 {
    color: #333;
    font-size: 22px;
    margin-bottom: 10px;
    border-bottom: 1px solid #ddd;
    padding-bottom: 10px;
}

/* Styling for individual details */
.details-label {
    font-weight: bold;
}

/* Styling for total */
.total {
    margin-top: 20px;
    font-weight: bold;
}

/* Styling for address */
.address {
    margin-top: 10px;
}

/* Styling for date */
.date {
    margin-top: 10px;
    font-style: italic;
}

    </style>
</head>
<body>
    <h1>Détails de la Commande</h1>
    <div id="commande-details"></div>

    <script>
        // Extract `reference` from the URL query parameters
        const urlParams = new URLSearchParams(window.location.search);
        const reference = urlParams.get('reference');

        if (reference) {
            // Fetch the details of the specified commande from the server
            fetch(`/get-Facture-details?reference=${encodeURIComponent(reference)}`)
                .then(response => response.json())
                .then(commande => {
                    // Render the details in a structured format
                    const detailsDiv = document.getElementById('commande-details');
                    detailsDiv.innerHTML = `
                        <h2>Commande ${commande.referenceCommande}</h2>
                        <p>ID Utilisateur: ${commande.utilisateur_id}</p>
                        
                        <p>quantite: ${commande.quantite}</p>
                        <p>Titre: ${commande.titre}</p>
                        <p>prixParKilo: ${commande.prixParKilo}</p>
                        <p>nomUtilisateur: ${commande.nomUtilisateur}</p>
                        
                        <p>numeroUtilisateur: ${commande.numeroUtilisateur}</p>
                        <p>adresseUtilisateur: ${commande.adresseUtilisateur}</p>
                        <p>moyenPaiement: ${commande.moyenPaiement}</p>
                        <p>dateCommande: ${commande.dateCommande}</p>
                        <p>Sous-Total: ${commande.subtotal}</p>
                        <p>frais_livraison: ${commande.frais_livraison}</p>
                        <p>total: ${commande.total}</p>
                    `;
                })
                .catch(error => {
                    console.error('Erreur lors de la récupération des détails de la commande :', error);
                });
        } else {
            alert("Référence de la commande manquante.");
        }
    </script>
</body>
</html>
